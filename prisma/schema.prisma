// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}


// For Assistant User
model Assistant{
  id          String @id @default(auto()) @map("_id") @db.ObjectId

  name        String

  password    String

  email       String @unique()

  role        AssistantRole

  createdAt    DateTime @default(now())

  updatedAt    DateTime @updatedAt


  @@map("assistants")
}


enum AssistantRole {
  OfficeAssistant
  LabAssistant
  StudentCouncil
}

// For professor and normal user. Student
model User{
  id           String @id @default(auto()) @map("_id") @db.ObjectId
  
  name         String

  nickname     String @unique()

  password     String

  email        String @unique() 
  
  groupId      String @unique() // 학번
  
  role         UserRole       // Role

  status       Status   @default(Pending) // 회원 승인 여부

  enrolledIn   DateTime @default(now()) // Time user enrolled

  loginAt      DateTime @default(now()) // User last login date

  createdAt    DateTime @default(now())

  updatedAt    DateTime @updatedAt

  @@map("members")
}

enum UserRole {
  Student
  Professor 
}

enum Status {
  Pending
  Approved
  Reject 
}


model ErrorLog{
  
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  endpoint String 
  info     ErrorInfo[]

  @@map("error_log")
}


type ErrorInfo{
  // This field is for api versioning : optional
  version          Int? @default(1)
  // Http Method of error
  http_method      String
  // Status Code
  status_code      Int  
  // Application Code : optional
  application_code Int?
  // Stack Trace
  stack_trace      String
}